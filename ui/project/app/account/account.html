<div class="block-header">
    <h2>{{vm.currentUser.Firstname}} {{vm.currentUser.Lastname}} <small>Active User</small></h2>
</div>

<div class="card" id="profile-main">
    <div class="pm-overview c-overflow">
        <div class="pmo-pic">
            <div class="p-relative">
                    <img class="img-responsive" src="/images/Mocks/profile/profile-pic-3.jpg" alt="">
            </div>


            <div class="pmo-stat">
                <h2 class="m-0 c-white">89234</h2>
                Meaningless Number
            </div>
        </div>

        <div class="pmo-block pmo-contact hidden-xs">
            <h2>Contact</h2>

            <ul>
                <li><i class="zmdi zmdi-email"></i> {{vm.currentUser.Email}}</li>
            </ul>
        </div>


    </div>

    <div class="pm-body clearfix">

        <div class="pmb-block">
            <div class="pmbb-header">
                <h2><i class="zmdi zmdi-account m-r-5"></i> User Account</h2>

                <ul class="actions" data-ng-if="vm.editAccount === 0">
                    <li class="dropdown" uib-dropdown>
                        <a href="" uib-dropdown-toggle>
                            <i class="zmdi zmdi-more-vert"></i>
                        </a>

                        <ul class="dropdown-menu dropdown-menu-right">
                            <li>
                                <a data-ng-click="vm.editAccount = 1" href="">Edit</a>
                            </li>
                            <li>
                                <a data-ng-click="vm.editPassword = 1" href="">Change Password</a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="pmbb-body p-l-30">
                <div class="pmbb-view" data-ng-if="vm.editAccount === 0 && vm.editPassword === 0">
                    <dl class="dl-horizontal">
                        <dt>First Name</dt>
                        <dd>{{ vm.currentUser.Firstname }}</dd>
                    </dl>
                    <dl class="dl-horizontal">
                        <dt>Last Name</dt>
                        <dd>{{ vm.currentUser.Lastname }}</dd>
                    </dl>
                    <dl class="dl-horizontal">
                        <dt>User Name</dt>
                        <dd>{{ vm.currentUser.Username }}</dd>
                    </dl>
                    <dl class="dl-horizontal">
                        <dt>Email</dt>
                        <dd>{{ vm.currentUser.Email }}</dd>
                    </dl>
                    <dl class="dl-horizontal">
                        <dt>Roles</dt>
                        <dd>
                            <ul>
                                <li ng-repeat="role in vm.currentUser.Roles">
                                    {{role}}
                                </li>
                            </ul>
                        </dd>
                    </dl>
                </div>

                <form data-ng-submit="vm.update(vm.currentUser)" class="pmbb-edit" name="userProfileForm" data-ng-if="vm.editAccount === 1">
                    <dl class="dl-horizontal">
                        <dt class="p-t-10">First Name</dt>
                        <dd>
                            <div class="fg-line">
                                <input type="text" required ng-maxlength="150" data-ng-model="vm.currentUser.Firstname" name="firstname" class="form-control">
                            </div>

                        </dd>
                    </dl>
                    <dl class="dl-horizontal">
                        <dt class="p-t-10">Last Name</dt>
                        <dd>
                            <div class="fg-line">
                                <input type="text" required ng-maxlength="150" data-ng-model="vm.currentUser.Lastname" name="lastname" class="form-control">
                            </div>

                        </dd>
                    </dl>
                    
                    <div class="m-t-30">
                        <button class="btn btn-primary btn-sm" type="submit" ng-disabled="vm.working || userProfileForm.$invalid">
                            <span ng-show="vm.working">Saving <i class="fa fa-spinner fa-pulse"></i></span>
                            <span ng-show="!vm.working">Save</span>
                        </button>
                        <button class="btn btn-link btn-sm" data-ng-click="vm.editAccount = 0">Cancel</button>
                    </div>
                </form>

                <form data-ng-submit="vm.changePassword(vm.updatedPassword)" class="pmbb-edit" name="userPasswordForm" data-ng-if="vm.editPassword === 1">
                    <dl class="dl-horizontal">
                        <dt class="p-t-10">Current password</dt>
                        <dd>
                            <div class="fg-line">
                                <input type="password" ng-minlength="6" required data-ng-model="vm.updatedPassword.OldPassword" name="currentpassword" class="form-control">
                            </div>

                        </dd>
                    </dl>
                    <dl class="dl-horizontal">
                        <dt class="p-t-10">New password</dt>
                        <dd>
                            <div class="fg-line">
                                <input type="password" ng-minlength="6" required data-ng-model="vm.updatedPassword.NewPassword" name="newpassword" class="form-control">
                            </div>
                        </dd>
                    </dl>

                    <div class="m-t-30">
                        <button class="btn btn-primary btn-sm" type="submit" ng-disabled="vm.working || userPasswordForm.$invalid">
                            <span ng-show="vm.working">Saving <i class="fa fa-spinner fa-pulse"></i></span>
                            <span ng-show="!vm.working">Save</span>
                        </button>
                        <button class="btn btn-link btn-sm" data-ng-click="vm.editPassword = 0">Cancel</button>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>


